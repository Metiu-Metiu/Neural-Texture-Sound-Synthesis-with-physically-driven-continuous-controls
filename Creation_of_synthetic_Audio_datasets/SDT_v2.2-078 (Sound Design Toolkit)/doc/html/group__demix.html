<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Sound Design Toolkit: SDTDemix.h: Transient/tonal/residual components separator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sound Design Toolkit
   &#160;<span id="projectnumber">078</span>
   </div>
   <div id="projectbrief">Physically informed sound synthesis for everyday sounds</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__demix.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SDTDemix.h: Transient/tonal/residual components separator</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga526f6f9e0aeb6b595c0d10124b0f8940"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga526f6f9e0aeb6b595c0d10124b0f8940"></a>
typedef struct <a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a></td></tr>
<tr class="memdesc:ga526f6f9e0aeb6b595c0d10124b0f8940"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque data structure for the percussive/harmonic/residual components separator. <br /></td></tr>
<tr class="separator:ga526f6f9e0aeb6b595c0d10124b0f8940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga526f6f9e0aeb6b595c0d10124b0f8940"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga526f6f9e0aeb6b595c0d10124b0f8940"></a>
typedef struct <a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a></td></tr>
<tr class="memdesc:ga526f6f9e0aeb6b595c0d10124b0f8940"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque data structure for the percussive/harmonic/residual components separator. <br /></td></tr>
<tr class="separator:ga526f6f9e0aeb6b595c0d10124b0f8940"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7907d346e32d1ebe239ce2ba1fa008eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga7907d346e32d1ebe239ce2ba1fa008eb">SDTDemix_new</a> (int size, int radius)</td></tr>
<tr class="memdesc:ga7907d346e32d1ebe239ce2ba1fa008eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object constructor.  <a href="#ga7907d346e32d1ebe239ce2ba1fa008eb">More...</a><br /></td></tr>
<tr class="separator:ga7907d346e32d1ebe239ce2ba1fa008eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4362da5fb1a4837fff7ad85b17ccc18c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga4362da5fb1a4837fff7ad85b17ccc18c">SDTDemix_free</a> (<a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *x)</td></tr>
<tr class="memdesc:ga4362da5fb1a4837fff7ad85b17ccc18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object destructor.  <a href="#ga4362da5fb1a4837fff7ad85b17ccc18c">More...</a><br /></td></tr>
<tr class="separator:ga4362da5fb1a4837fff7ad85b17ccc18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9af088bc6afc54fe0bf7449ef9e069cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga9af088bc6afc54fe0bf7449ef9e069cd">SDTDemix_setOverlap</a> (<a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *x, double f)</td></tr>
<tr class="memdesc:ga9af088bc6afc54fe0bf7449ef9e069cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the window overlapping factor.  <a href="#ga9af088bc6afc54fe0bf7449ef9e069cd">More...</a><br /></td></tr>
<tr class="separator:ga9af088bc6afc54fe0bf7449ef9e069cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga327c05ed4d0ac8e32327f5bfde8a8908"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga327c05ed4d0ac8e32327f5bfde8a8908">SDTDemix_setNoiseThreshold</a> (<a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *x, double f)</td></tr>
<tr class="memdesc:ga327c05ed4d0ac8e32327f5bfde8a8908"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the noise threshold.  <a href="#ga327c05ed4d0ac8e32327f5bfde8a8908">More...</a><br /></td></tr>
<tr class="separator:ga327c05ed4d0ac8e32327f5bfde8a8908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0554be76d3ee4e2b88355c762c3be426"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#ga0554be76d3ee4e2b88355c762c3be426">SDTDemix_setTonalThreshold</a> (<a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *x, double f)</td></tr>
<tr class="memdesc:ga0554be76d3ee4e2b88355c762c3be426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the tornal threshold.  <a href="#ga0554be76d3ee4e2b88355c762c3be426">More...</a><br /></td></tr>
<tr class="separator:ga0554be76d3ee4e2b88355c762c3be426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa14ba9e7f5c05702ea8be341191c05ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__demix.html#gaa14ba9e7f5c05702ea8be341191c05ab">SDTDemix_dsp</a> (<a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *x, double *outs, double in)</td></tr>
<tr class="memdesc:gaa14ba9e7f5c05702ea8be341191c05ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal processing routine. Call this function at sample rate to separate an arbitrary signal into its percussive/harmonic/residual components.  <a href="#gaa14ba9e7f5c05702ea8be341191c05ab">More...</a><br /></td></tr>
<tr class="separator:gaa14ba9e7f5c05702ea8be341191c05ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This algorithm looks for vertical and horizontal structures in the spectrogram to separate an arbitrary audio signal into its percussive (transients), harmonic (sustained tones) and residual (noise) components. It is based on a technique called structure tensor, frequently used in image processing for edge and corner detection or to estimate the orientation of an object.</p>
<p>The structure tensor can be thought as a smoothed gradient of the spectrogram, which describes the consistency and direction of changes in the energy content of each bin. The anisotropy (consistency) and direction descriptors extracted from the structure tensor are used to classify the spectrogram bins into three categories: Bins which do not exhibit a particular gradient direction (low anisotropy) become part of the residual, noisy component; Bins which tend to have a vertical orientation (high anisotropy, high direction) are included in the percussive component; Bins with a mostly horizontal orientation (high anisotropy, low direction) fall into the harmonic component.</p>
<p>This percussive/harmonic/residual separation is suitable to separate attacks, decays and noise from a musical signal, or to isolate myoelastic (percussive), phonatory (harmonic) and turbulent (noisy) activities from a vocal signal. In particular, the algorithm can be used as a preprocessing step to improve the results of the myoelastic detector, pitch tracker and spectral moments extractor present in the analysis part of the Sound Design Toolkit. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa14ba9e7f5c05702ea8be341191c05ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTDemix_dsp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>outs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal processing routine. Call this function at sample rate to separate an arbitrary signal into its percussive/harmonic/residual components. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">outs</td><td>Pointer to a 3-elements output array. outs[0] is the percussive component, outs[1] is the harmonic component and outs[2] is the residual. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>Input sample </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4362da5fb1a4837fff7ad85b17ccc18c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTDemix_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Object destructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">x</td><td>Pointer to the instance to destroy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7907d346e32d1ebe239ce2ba1fa008eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> * SDTDemix_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Object constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Analysis window length, in samples </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">radius</td><td>Smoothing kernel radius, in samples </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the new instance </dd></dl>

</div>
</div>
<a class="anchor" id="ga327c05ed4d0ac8e32327f5bfde8a8908"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTDemix_setNoiseThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the noise threshold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Amount of signal falling into the residual category </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9af088bc6afc54fe0bf7449ef9e069cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTDemix_setOverlap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the window overlapping factor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Window overlapping factor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0554be76d3ee4e2b88355c762c3be426"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDTDemix_setTonalThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__demix.html#ga526f6f9e0aeb6b595c0d10124b0f8940">SDTDemix</a> *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the tornal threshold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Amount of non-residual falling into the tonal category </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
